#StochasticProcess  
## 更新过程的定义
更新过程是对 Poisson 过程的一种泛化。更新时间是 iid 的随机变量。正是地，我们令 $X_{n}$ 是一系列 iid 的随机变量，并且 $P (X=0) <1$（确保了每次更新不会都无间隔地发生）我们将 $X_{n}$ 记为第 $n-1$ 个事件和第 $n$ 个事件之间的时间，记
$$
\mu= \mathrm{E}[X_{n}] = \int_{0}^{\infty}xdF(x)
$$
为平均间隔，用 $S_{n}$ 表示前 $n$ 次更新事件的总时间，$N(t)$ 表示在 $t$ 时已经发生的事件数。那么，我们说，随机过程 $N(t)$ 是一个更新过程。
要得到这里的 $N(t)$ 分布，我们可以考虑：
$$
P(N(t) = n) = P(S_{n} \le t) - P(S_{n+1}\le t)
$$
由于 $X_{i}$ 是 iid 的随机变量，因此 $S_{n}$ 的分布就是 $F_{n}$（$X_i$ 的分布的 $n$ 次卷积）。因此：
$$
P(N(t) = n) = F_{n}(t)-F_{n+1}(t)
$$

## 更新过程中的极限定理
首先，在长时间时，以概率为 1 地，
$$
\frac{S_{n}}{n} = \mu
$$
也就是说，每次更新的平均时间收敛到 $\mu$
此外，就算我们把 $S_{n}$ 换成 $t$，$n$ 换成 $N(t)$，也是成立的。因为多出来的一点在长时间上没有影响（即：我们的分子上不是第 $n$ 次更新后的时间，而是第 $n$ 次更新后，第 $n+1$ 次更新前的一个时间），也是成立的，也就是说：
$$
\frac{t}{N(t)}=\mu\quad  \frac{N(t)}{t} = \frac{1}{\mu}
$$

接下来我们介绍停时 (Stopping Time)的概念。如果一个随机变量序列 $X_{i}$ 中的一个事件 $N=n$ 与 $X_{n+1}, X_{n+2},\cdots ,$ 独立，那么我们就称 $N$ 是一个停时。直观上理解，在“停时”到来时，我们可以利用已知的信息做出决策。例如，我们需要在某条地铁线的倒数第二站下车，而且我们已经知道此地铁沿线所有站的名字，我们就可以在听到倒数第二站的名字时选择下车，这个事件就是一个停时。如果我们不知道地铁沿线所有站的名字，这个停时显然就不存在。因此，停时也可以被叫做“行权时间”(Optional time)。Wald 方程指出，若 $N$ 是序列 $X_{i}$ 的停时，那么
$$
\mathrm{E}\left[\sum_{i=1}^{N} X_{n}\right]= \mathrm{E} [N] \mathrm{E}[X]
$$
我们也可以证明其他的极限定理。比如说，我们用 $m(t)$ 来记 $N(t)$ 的期望值。那么我们有：
$$
\frac{m(t)}{t} = \frac{1}{\mu}
$$
这个定理被称为**基本更新定理**

## 关键更新定理
如果更新间隔是某个定长 $d$ 的整数倍，我们可以说这个更新过程是格点的，并将 $d$ 称为这个随机过程的周期。Blackwell 定理指出，在任意长的一段时间段 $a$ 内，更新次数的期望都会趋于 $a/\mu$，也就是说：
$$
m(t+a)-m(t)=a/\mu
$$
关键更新定理（或者我愿意将其称之为“更新卷积定理”）指出，我们使用 $dm(x)$ 代表在一小段时间 $dx$ 内发生事件的期望数目，我们找到一个函数 $h(x)$，把它在 $[0,t]$ 上的值“翻转”一下，用于给 $dm(t)$ “加权”（就如同卷积操作一样，翻转、加权、求和），加权的结果是 $h(t)$ 在 $[0,t]$ 上的积分乘以 $1/\mu$ 的系数：
$$
\lim_{t \rightarrow \infty }\int_{0}^{t} h(t-x) dm(x) = \frac{1}{\mu} \int_{0}^{t} h(t)dt
$$
## 交替更新过程
我们设随机向量 $(Z_{n},Y_{n})$ 是 iid 的，因此随机变量序列 $Z_{n},Y_{n}$ 都是 iid 的，但是我们允许 $Z_{n},Y_{n}$ 相依。我们让一个系统先处在开状态，保持一段时间 $Z_{1}$ 后切换到关状态 $Y_{1}$，此后循环往复。每当系统到达开状态时，我们说更新发生。那么，长时间上，系统处于开状态的概率：
$$
P(\infty ) = \frac{\mathrm{E} [Z_{n}]}{\mathrm{E} [Z_{n}] + \mathrm{E} [Y_{n}]}
$$
许多系统都可以使用交替更新过程建模。例如，我们将一次更新后已经走过的时间称为一个系统的“年龄“，而将这次更新到下次更新的一段时间称为这个系统的“剩余寿命”，那么我们可以推导其年龄和剩余寿命分布：
若系统的年龄小于等于 $x$，我们称这个系统处在“开”状态，否则反之。那么：
$$
\begin{align*}
P(A(t) \le x )\\
&= \frac{\mathrm{E}(\min(X,x) )}{\mathrm{E} [X]}\\
&= \frac{\int_{0}^{\infty} P(\min (X,x)>y)dy }{\mathrm{E}[X]} \\
&= \int_{0}^{x} P(X>y)P(x>y)dy+0 \\
&= \int_{0}^{x} P(x>y)dy\\
 &= \int_{0}^{x} \bar F(y) dy / \mu
\end{align*}
$$
同理，对于 $P(Y(t) \le x)$，我们可以得到**完全相同**的结论。也就是说，年龄和剩余寿命实际上有着完全相同的分布。

## 延迟更新过程
由于我们通常是从某个更新过程的“中途”进入进行观测，而不是从这个更新过程启动的时刻开始观测。因此，从开始观测到第一次更新到来的时间往往和其他更新间隔有着不同的分布。我们将这样的过程称为延迟更新过程。那么，上面叙述的所有的极限定理对于延迟更新过程都适用。
