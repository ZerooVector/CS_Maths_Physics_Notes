#TraditionalComputerScience 
## 内存管理的基本原理和要求
内存管理的主要功能包括：
- 内存空间的分配和回收
- 地址转换：从逻辑地址到物理地址
- 内存空间的扩充、内存共享和存储保护

程序的链接通常有三种方式：静态链接（在装入时需要修改相对地址、变换外部调用符号）、装入时动态链接（在装入内存时，采用边装入边链接的方式）、运行时动态链接（程序执行过程中需要该目标模块再链接）

程序装入内存时也有三种装入方式：
- 绝对装入：只适用于单道程序环境，编译时产生带有绝对地址的目标代码，绝对装入程序按照装入模块中的地址，将程序和数据装入内存
- 可重定位装入：多个目标模块的起始地址是从 0 开始的，其他地址相对于起始地址，此时在装入过程中队指令、数据地址进行修改的过程称为“重定位”。这种地址变换通常是在装入过程中一次性完成的，因此又称为“静态重定位”。在这种情况下，作业装入内存需要一次性分配它要求的全部内存空间。
- 动态重定位：地址转换在程序执行时才进行，装入内存后的地址都是相对地址。这个时候需要重定位寄存器的支持。

程序员看到的是逻辑地址；装入程序负责将逻辑地址转换到物理地址

覆盖与交换

### 连续分区分配方式
- 单一连续分配
- 固定分区分配（会产生内部碎片：在分区内部有无法利用的空间）
- 动态分区分配（会产生外部碎片：某些分区太小，难以利用）
	- 首次适应、临近适应、最佳适应、最坏适应

## 页表与段表

### 分页存储管理
在分页存储管理中，没有外部碎片；可能有很小很小的内部碎片。
逻辑地址结构：页号||页内偏移量。系统会建立一张页表，以便将页号和物理内存块号对应起来。

页表寻址过程：
- 计算页号和页内偏移量
- 比较页号和页表长度；抛出越界中断
- 计算页表项地址，取出其中的物理块号
- 给出真实的地址

为了加速，可以使用快表。为了减少调入内存的页表的数量，我们甚至可以使用多级页表。

### 分段存储管理

类似地，需要段号||段内偏移量。段表中需要记录段长！其寻址过程与页表相似，注意有可能产生段内的越界中断。注意：段式管理可能产生外部碎片。

除此之外，我们也可以进行段页式管理：为每个进程建立一张段表，每个分段有一张页表。

## 虚拟内存

我们介绍请求分页系统。这时，我们需要修改页表，增加：状态位（指示该页是否已经调入内存）、访问字段（记录本页在一段时间内访问的次数）、修改位（指示是否被修改过，以判断是否写回外存）、外存地址

如果访问的页面不在内存中，那么就产生缺页中断。直接调入某页；或者淘汰某页，再调入某页

### 置换算法
- 最佳置换算法：选择之后最长时间不被访问的页
- 先进先出算法、Belady 异常
- 最久最近未使用算法
- 时钟算法


