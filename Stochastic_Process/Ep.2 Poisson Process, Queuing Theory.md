#SP 
在本章中，我们将谈谈泊松分布及其应用。
## The Poisson Process
##### Def : Counting Process 
一个随机过程 $N(t)$ 被称作一个计数过程，如果 $N (t)$ 代表了在时间 $t$ 时，事件发生的次数。这里，$N(t)$ 必须满足：
- $N (t) \ge 0$
- $N(t)$ 是整数
- 如果 $s<t$，必须有 $N (s) \le N(t)$
- 对于 $s<t$，$N(t)-N(s)$ 的值代表着在区间 $(s, t]$ 内发生的事件数目
我们称一个计数过程是**独立增量过程 (Independent Increments)**，是指在 $t$ 时刻事件已经发生的次数 $N(t)$ 必须与 $(t,t+s]$ 这段时间中事件发生的次数 $N(t+s)-N(t)$ 独立。
我们称一个计数过程是**平稳增量过程 (Stationary Increments)**，是指在任何时间段内，事件发生的次数的分布仅与时间段的长度有关，也就是说，在时间段 $(t_{1}+s,t_{2}+s]$ 中和时间段 $(t_{1},t_{2}]$ 中事件发生的次数的分布相同。
最常见的计数过程之一就是泊松过程。

##### Def : Poisson Process 
一个计数过程被称为泊松过程，如果它满足：
- $N (0) = 0$
- 该计数过程是独立增量过程
- 对于长度为 $t$ 的时间间隔，事件发生的次数是以 $\lambda t$ 为均值的泊松分布，也就是说：
$$
P[N(t+s)-N(s) = n] = \exp(-\lambda t)\frac{(\lambda t)^{n}}{n!} 
$$
事实上，在实际中，我们很难判断一个计数过程是否满足条件（3），这要求我们给出一个泊松过程的等价定义

##### Def : The Equivalent Definition of  Poisson Process
一个计数过程被称为是泊松过程，如果它：
- $N (0) = 0$
- 该过程是独立增量、平稳增量过程
- $P (N (h) =1) = \lambda h +o (h)$
- $P (N (h) \ge 2 ) = o(h)$

##### Theorem 泊松分布的两个定义是等价的

此外，我们可以指出，$N(t)$ 服从泊松分布是对二项分布的一种近似。

## InterArrival and  Waiting Time Distribution 
考虑一个泊松过程，使用 $X_{1}$ 代表第一个事件发生的时间，$X_{n}$ 代表第 $n-1$ 个事件和第 $n$ 个事件发生的间隔。那么，序列 $\{X_{n}\}$ 称为到达时间序列。那么显然：
$$
P(X_{1}>t) = P(N(t) = 0) = e^{-\lambda t} 
$$
对于 $X_{n}$，由平稳增量和独立增量的性质，也有：
$$
P(X_{n}>t)= e^{-\lambda t}
$$
也就是说，到达事件间隔服从参数为 $1/\lambda$ 的指数分布。这并不出我们所料，因为泊松过程的独立增量和平稳增量性质决定了到达间隔的分布必须是无记忆性的。另外，我们可以求出第 $n$ 个人的到达时间的分布，是一个 Gamma 分布：
$$
S_{n} = \sum_{t}X_{t}
$$
从而：
$$
f(t) = \lambda e^{-\lambda t} \frac{(\lambda t)^{n-1}}{(n-1)!}
$$
这个也可以通过注意到：
$$
S_{n} \le t  \Rightarrow N(t)  \ge  n
$$
来获得，那么
$$
F(S_{n}) = P(S_{n}< t) = \sum_{j}  e^{-\lambda t} \frac{(\lambda t)^{j}}{j!}
$$
这个还可以使用平稳增量过程的性质来得到：
$$
\begin{align*}
P(t \le  S_{n} \le  t+dt ) \\
& = P(N(t) = n-1 , 1 \ event \ in\  (t,t+dt))+o(dt)   \\
&= P(N(t) = n-1) P(1 \ event \ in\  (t,t+dt))+o(dt)\\
&= \lambda e^{-\lambda t} \frac{(\lambda t)^{n-1}}{(n-1)!} dt 
\end{align*}
$$
两边微分一次即可。
因此，通过一个指数间隔的到达过程，我们也可以定义泊松过程。

## Conditional Distribution of the Arrival Times 
首先我们说明一点：如果我们已经知道，在时间 $t$ 之前发生过一次事件，现在要求我们求出事件发生时间的分布。根据泊松分布的独立增量性质，显然应该有：
$$
P(X_{1}<s|N(t) = 1) = \frac{s}{t} 
$$
这个性质可以扩展：使得 $Y_{1}, Y_{2},\cdots ,Y_{n}$ 为 $n$ 个 iid 随机变量，$Y_{(k)}$ 是它们的顺序统计量，顺序统计量的联合分布可以由：
$$
f(y_{1},y_{2},\cdots ,y_{n}) = n! \prod_{i=1}^{n}f(y_{i})
$$
这是由于，所有的统计量共有 $n!$ 个排列组合，而顺序统计量是这些排列组合中的任意一个。如果 $Y_{i}$ 都是在 $[0,t]$ 上均匀分布的，那么它们的顺序统计量的联合分布应该是：
$$
f(y_{1},y_{2},\cdots ,y_{n}) = \frac{n!}{t^{n}}
$$


##### Theorem 
给定 $N (t) = n$，那么 $n$ 个到达时间 $S_{1}, S_{2},\cdots ,S_{n}$ 与 $n$ 个独立随机变量的顺序统计量有完全相同的联合分布。
##### Proof
计算这个分布：
$$
\begin{align*}
P(t_{i}\le S_{i} \le t_{i}+h_{i}|N(t)=n)\\
&= P(1 \ event\ in [t_{i},t_{i}+h_{i}],\ no \ events\ in\ [0,t])/P(N(t)=n)\\
&= (\prod_{i}\lambda h_{i}e^{-\lambda h_{i}}e^{-\lambda(t- \sum_{i}h_{i})})/(e^{-\lambda t}(\lambda t)^{n}/n!)\\
&= \frac{n!}{t^{n}}h_{1}h_{2}\cdots h_{n}
\end{align*}
$$
因此，概率密度函数为：
$$
f(t_{1},t_{2},\cdots ,t_{n}) = \frac{n!}{t^{n}} \prod_{i}h_{i}
$$

##### Theorem 
我们将时间分为两类，具体分为哪一类，依赖于时间发生的时刻。具体地，如果一个事件发生在 $s$ 时刻，那么它被分类到 I 类的概率为 $P(s)$，被分类为 II 类的概率为 $1-P(s)$ 如果 $N(t)$ 代表着第 $i$ 类事件在时间 $t$ 之前发生的次数，那么两类时间发生的数目记为 $N_{1}(t),N_{2}(t)$，且均值分别为 $\lambda pt$ 和 $\lambda (1-p)t$。那么：
$$
p = \frac{1}{t} \int_{0}^{t} P(s)ds
$$
我们对着 $N (t) = n+m$ 取条件：
$$
\begin{align*}
P(N_{1}(t) =n,N_{2}(t) =m)\\
 &=P(N_{1}(t)=n,N_{2}(t)=m|N(t)=n+m)P(N(t)=n+m)
\end{align*}
$$
现在我们就看 $[0,t]$ 之内的任意一个事件，若它发生在时刻 $s$，那么它被分类到 I 型的概率为 $P(s)$，因为它的发生时间是均匀分布的，因此，它是 I 型事件的概率是：
$$
p = \frac{1}{t} \int_{0}^{t} P(s)ds
$$
而且，这个事件与其他所有的事件是独立的，那么：
$$
P(N_{1}(t)=n,N_{2}(t)=m|N(t)=n+m) = C_{n+m}^{n}p^{n}(1-p)^{m}
$$
代入计算，就得到结论。

### M/G/1 排队系统
我们定义一个 M/G/1 排队系统的忙期开始在“一个顾客发现系统空闲”时，结束在“系统中不存在任何顾客”时。