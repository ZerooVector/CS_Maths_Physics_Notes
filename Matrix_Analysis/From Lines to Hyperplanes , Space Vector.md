#MA 
## 切向量和法向量
### 切向量
对于一条直线, 任意一点的切向量都和直线重合；对于一条曲线，曲线上任意一点的切向量都与曲线的切线平行；对于一个平面，某点上的切线有无数条，它们都落在同一平面内。我们显然可以使用切向量来定义一条直线：
$$
x = k\hat \tau +c
$$
![[Pasted image 20230308195230.png|350]]

### 法向量
显然，直线的法向量与直线垂直，平面的法向量垂直于平面内的任意一条直线，曲面的法向量，是其在某点处切平面的法向量。
显然，给定空间中一点和一个法向量，就可以确定一个平面，已知一个平面时，法向量可以由平面内的两个向量叉乘得到。

## 超平面
超平面是一维直线和二维平面的推广：
$$
w^{T}x + b  = 0
$$
$w$ 是超平面的法向量，这容易通过二维（直线）和三维（平面）的情况下进行验证。显然，如果两个超平面平行，则它们的法向量也平行；两个超平面垂直时，它们的法向量就垂直。
此外，超平面通常被当作决策边界，$w^{T}x+b>0$ 和 $w^{T}x+b<0$ 划分出了两个区域。

当然，这也可以从函数的角度来看待，例如，一条直线 $3x_1+x_2+6=0$ 也可以写成 $x_{2}= 3x_1-6$，那么，我们将直线统一写成
$$
y = w'^{T} x'+b
$$
的形式，其中，$w'$ 和 $x'$ 都比之前少了一个变量。此时，构造函数
$$
F(x,y) = w'^{T}x'+b-y
$$
它的梯度向量就是超平面的法向量。

## 空间向量的几个作用
### 求线段中垂线的解析式——中垂线与线段垂直
如果一个线段的两端分别为 $\mu_{1},\mu_{2}$，那么，线段的中点是 $\frac{\mu_{1}+\mu_{2}}{2}$，考虑中垂线上的任意一点，用 $a$ 表示从中点指向中垂线上任意一点的向量，因为它与已知线段垂直，所以有 
$$(\mu_{2}-\mu_{1})^{T}a = 0$$
成立。显然，若记中垂线上任意一点的坐标为 $x$，上式可以被改写为：
$$
(\mu_{2}-\mu_{1})^T[x- \frac{1}{2}(\mu_{1}+\mu_{2})]=0
$$
把这个式子打开，得到：
$$
(\mu_{2}-\mu_{1})^{T}x - \frac{1}{2}(\mu_{2}-\mu_{1})^{T}(\mu_1+\mu_{2})= 0 
$$
这意味着，中垂线的法向量是 $\mu_{2}-\mu_{1}$。这有很多应用，例如，将各个类别质心的中垂线作为分类的决策边界。
![[Pasted image 20230308202635.png|350]]

### 计算超平面外一点到超平面的距离——任意向量向着法向投影
超平面的方程记为
$$
w^{T}x+b = 0
$$
现在，记超平面外的点为 $q$，而超平面上的**任意一点**为 $x$，那么记 $a$ 为从点 $x$ 指向点 $q$ 的向量
$$
a = q-x
$$
![[Pasted image 20230308202841.png|480]]

显然，向量 $a$ 向着平面法向量的方向投影，就得到了向量 $d$，$d$ 的模长就是点到平面的距离
$$
d = ||a|| \cos \theta \frac{w}{||w||} = ||a|| \frac{w^{T}a}{||a||||w||} \frac{w}{||w||} = \frac{w^{T}a}{||w||^{2}}w
$$
如果我们想要求距离，那么两边各求一次模长，也就是：
$$
||d|| = \frac{w^{T}a}{||w||^{2}}||w|| = \frac{w^{T}a}{||w||}
$$
把 $a$ 代入，并考虑到 $w^{T}a$ 可能有正有负，我们加个绝对值，那么
$$
\mathrm{dis} = \frac{|w^{T}(q-x)|}{||w||} = \frac{|w^{T}q+b|}{||w||}
$$
这与高中时学习的
$$
\mathrm{dis} = \frac{|Ax+Bx+C|}{\sqrt{A^{2}+B^{2}}}
$$
不谋而合。

### 计算点在超平面上的投影点坐标——利用已知的垂直条件设解
![[Pasted image 20230308204020.png|350]]

直接将正交投影点的坐标记为 $x_{q}$，那么由于这一点落在超平面上，显然有：
$$
w^{T}x_{q}+b = 0
$$
由于正交投影点到点 $q$ 的连线与平面的法向量平行，则：
$$
x_{q}- q  = kw
$$
以上两式联立，得到：
$$
w^{T}(kw+q) + b = 0
$$
那么，直接计算得到（这里不涉及到任何矩阵求逆，等等奇怪的操作）：
$$
k = -\frac{w^{T}q+b}{w^{T}w}  \Rightarrow x_{q}= q- \frac{w^{T}q+b}{w^{T}w}w
$$

### 向量在平面内、垂直于平面的分量
只有考虑一个始端在平面上的向量的两个分量才是有意义的，如果某一向量的始端不再平面上，那么我们要首先进行平移。
前面已经求出，
$$
q- x_{q}= \frac{w^{T}q+b}{w^{T}w} w 
$$
这就是向量 $q$ 在垂直于平面的方向上的分量；平行分量就是 $x_q$（从 $q$ 的始端指向 $x_q$ 的向量），也就是
$$
x_{q}= w(1- \frac{w^{T}q+b}{w^{T}w}) 
$$

### 两平行平面之间的距离
给定两个相互平行的超平面：
$$
w^{T} x+b_{1} = 0 \quad w^{T}x+b_{2} = 0
$$
在第一个超平面上选择点 A ，坐标为 $x_A$，在第二个上选择点 B，坐标为 $x_B$，向量 $a$ 由 A 指向 B，那么，我们只需计算 $a$ 在 $w$ 方向的单位向量上的投影：
$$
\mathrm{dis} = \frac{|w^{T}a|}{||w||} = \frac{|w^{T}(x_{A}-x_{B})|}{||w||} = \frac{|b_{2}-b_{1}|}{||w||} 
$$
![[Pasted image 20230308210859.png]]

